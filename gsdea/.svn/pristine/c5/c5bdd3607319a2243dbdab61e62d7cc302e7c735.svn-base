<%--
  Created by IntelliJ IDEA.
  User: lw
  Date: 17-1-10
  Time: 上午11:31
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>

    <META HTTP-EQUIV="pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
    <META HTTP-EQUIV="expires" CONTENT="0">

    <title>博波云平台</title>

    <link href="libs/Metro-UI/css/metro.min.css" rel="stylesheet">
    <link href="libs/Metro-UI/css/metro-schemes.css" rel="stylesheet">
    <link href="libs/Metro-UI/css/metro-icons.css" rel="stylesheet">
    <link href="libs/Metro-UI/css/metro-responsive.css" rel="stylesheet">
    <link rel='shortcut icon' type='image/x-icon' href='img/favicon.ico'/>
    <link href="styles/sdeaVF.css" rel="stylesheet">
    <link rel="stylesheet" media="all" href="libs/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.css">


    <meta charset="utf-8">

    <script id="jquery_183" type="text/javascript" class="library" src="libs/jQuery/jquery-2.1.4.js"></script>

    <script src="libs/High560/Highcharts-5.0.6/highcharts.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/map.js"></script>
    <!--<script src="http://code.highcharts.com/maps/highmaps.js"></script>-->
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/data.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/drilldown.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/funnel.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/exporting.js"></script>

    <script type="text/javascript" src="libs/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.min.js"></script>
    <script type="text/javascript" src="route/earth/jquery-jvectormap-cn-merc.js"></script>


    <!--

         <script src="http://code.highcharts.com/highcharts.js"></script>
         <script src="http://code.highcharts.com/maps/modules/map.js"></script>
  <div ui-view></div>
         <script src="http://code.highcharts.com/maps/modules/data.js"></script>
         <script src="http://code.highcharts.com/maps/modules/drilldown.js"></script>-->


    <!-- <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

<script src="libs/require.js"></script>
<script src="route/bootstrap.js"></script>

    -->


</head>
<body>
<div>

</div>


<div id='container_earth11'></div>

<script>

    $('#container_earth11').vectorMap({
        map: 'cn_merc',
        focusOn: {
            x: 0.5,
            y: 0.5,
            scale: 2
        }

    })


</script>

</body>
</html>


<%--
  Created by IntelliJ IDEA.
  User: lw
  Date: 17-1-10
  Time: 上午11:31
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>

    <META HTTP-EQUIV="pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
    <META HTTP-EQUIV="expires" CONTENT="0">

    <title>博波云平台</title>

    <link rel="stylesheet" media="all" href="libs/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.css">


    <meta charset="utf-8">

    <META HTTP-EQUIV="pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
    <META HTTP-EQUIV="expires" CONTENT="0">

    <title>博波云平台</title>

    <link href="libs/Metro-UI/css/metro.min.css" rel="stylesheet">
    <link href="libs/Metro-UI/css/metro-schemes.css" rel="stylesheet">
    <link href="libs/Metro-UI/css/metro-icons.css" rel="stylesheet">
    <link href="libs/Metro-UI/css/metro-responsive.css" rel="stylesheet">
    <link rel='shortcut icon' type='image/x-icon' href='img/favicon.ico'/>
    <link href="styles/sdeaVF.css" rel="stylesheet">
    <link rel="stylesheet" media="all" href="libs/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.css">


    <meta charset="utf-8">

    <script id="jquery_183" type="text/javascript" class="library" src="libs/jQuery/jquery-2.2.3.js"></script>

    <script src="libs/High560/Highcharts-5.0.6/highcharts.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/map.js"></script>
    <!--<script src="http://code.highcharts.com/maps/highmaps.js"></script>-->
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/data.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/drilldown.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/funnel.js"></script>
    <script src="libs/High560/Highcharts-5.0.6/maps/modules/exporting.js"></script>
    <script type="text/javascript" src="route/earth/cn-china-by-peng8.js"></script>
    <script type="text/javascript" src="libs/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.min.js"></script>
    <script type="text/javascript" src="route/earth/jquery-jvectormap-cn-merc.js"></script>

    <!--


         <script src="http://code.highcharts.com/highcharts.js"></script>
         <script src="http://code.highcharts.com/maps/modules/map.js"></script>
  <div ui-view></div>
         <script src="http://code.highcharts.com/maps/modules/data.js"></script>
         <script src="http://code.highcharts.com/maps/modules/drilldown.js"></script>-->


    <!-- <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

<script id="jquery_183" type="text/javascript" class="library" src="libs/jQuery/jquery-2.2.3.js"></script>



<script type="text/javascript" src="libs/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.min.js"></script>
<script type="text/javascript" src="route/earth/jquery-jvectormap-cn-merc.js"></script>
<script src="libs/require.js"></script>
<script src="route/bootstrap.js"></script>



<div id='container_earth11'></div>

<script>

$('#container_earth11').vectorMap({
    map: 'cn_merc',
    focusOn: {
        x: 0.5,
        y: 0.5,
        scale: 2
    }

})


</script>
<div>

</div>


<div ui-view></div>


<script src="libs/require.js"></script>
<script src="route/bootstrap.js"></script>
<script>
<div id='container_earth11' style="width: 800px; "></div>
</script>
<div></div>


<div> <div ui-view></div></div>



<script src="libs/require.js"></script>
<script src="route/bootstrap.js"></script>
    -->


</head>
<body>

<div id="container" style="height: 500px; min-width: 310px; max-width: 800px; margin: 0 auto"></div>
<script>
    $(function () {

        Highcharts.setOptions({
            lang: {
                drillUpText: "返回 > {series.name}"
            }
        });

        var data = Highcharts.geojson(Highcharts.maps['countries/cn/custom/cn-all-china']),
            small = $('#container').width() < 400;

        // 给城市设置随机数据
        $.each(data, function (i) {
            this.drilldown = this.properties['drill-key'];

            this.value = i;
        });

        function getPoint(e) {
            console.log(e.point.name);
        }

        function getShow(e) {
            alert(1);
        }

        //初始化地图
        $('#container').highcharts('Map', {

            chart: {
                spacingBottom: 30,

                events: {
                    drilldown: function (e) {

                        if (!e.seriesOptions) {
                            var chart = this;
                            /*   mapKey = 'countries/china/' + e.point.drilldown + '-all',
                             fail = setTimeout(function () {
                             if (!Highcharts.maps[mapKey]) {
                             chart.showLoading('<i class="icon-frown"></i> 加载失败 ' + e.point.name);

                             fail = setTimeout(function () {
                             chart.hideLoading();
                             }, 1000);
                             }
                             }, 10000);*/
                            var cname = e.point.properties["cn-name"];
                            chart.showLoading('<i class="icon-spinner icon-spin icon-3x"></i>');
                            // 加载城市数据
                            $.ajax({
                                type: "GET",
                                url: "http://data.hcharts.cn/jsonp.php?filename=GeoMap/json/" + e.point.drilldown + ".geo.json",
                                contentType: "application/json; charset=utf-8",
                                dataType: 'jsonp',
                                crossDomain: true,
                                success: function (json) {
                                    data = Highcharts.geojson(json);

                                    $.each(data, function (i) {

                                        this.value = i;
                                        this.events = {};
                                        this.events.click = getPoint;

                                    });
                                    chart.hideLoading();

                                    chart.addSeriesAsDrilldown(e.point, {
                                        name: e.point.name,
                                        data: data,
                                        events: {
                                            show: function () {
                                                alert(1);
                                            }
                                        },
                                        dataLabels: {
                                            enabled: true,
                                            format: '{point.name}'
                                        }
                                    });
                                },
                                error: function (XMLHttpRequest, textStatus, errorThrown) {

                                }
                            });
                        }


                        this.setTitle(null, {text: cname});
                    },
                    drillup: function () {
                        this.setTitle(null, {text: '中国'});
                    }
                }
            },
            tooltip: {
                formatter: function () {
                    var htm = "你为什么这么犀利？<br/>";

                    if (this.point.drilldown) {
                        htm += this.point.properties["cn-name"];
                    } else {
                        htm += this.point.name;
                    }
                    htm += ":" + this.point.value;
                    return htm;

                }
            },
            credits: {
                href: "javascript:goHome()",
                text: "www.peng8.net"
            },
            title: {
                text: 'highmap中国地图By peng8'
            },

            subtitle: {
                text: '中国',
                floating: true,
                align: 'right',
                y: 50,
                style: {
                    fontSize: '16px'
                }
            },

            legend: small ? {} : {
                // enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },
            //tooltip:{
            //pointFormat:"{point.properties.cn-name}:{point.value}"
            //},
            colorAxis: {
                min: 0,
                minColor: '#E6E7E8',
                maxColor: '#005645',
                labels: {
                    style: {
                        "color": "red", "fontWeight": "bold"
                    }
                }
            },

            mapNavigation: {
                enabled: true,
                buttonOptions: {
                    verticalAlign: 'bottom'
                }
            },

            plotOptions: {
                map: {
                    states: {
                        hover: {
                            color: '#EEDD66'
                        }
                    }
                }
            },

            series: [{
                data: data,
                name: '中国',
                dataLabels: {
                    enabled: true,
                    format: '{point.properties.cn-name}'
                }
            }],

            drilldown: {

                activeDataLabelStyle: {
                    color: '#FFFFFF',
                    textDecoration: 'none',
                    textShadow: '0 0 3px #000000'
                },
                drillUpButton: {
                    relativeTo: 'spacingBox',
                    position: {
                        x: 0,
                        y: 60
                    }
                }
            }
        });
    });

    var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    var base64DecodeChars = new Array(
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63,
        52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1,
        -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,
        15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1,
        -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
        41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);


    function base64decode(str) {
        var c1, c2, c3, c4;
        var i, len, out;

        len = str.length;
        i = 0;
        out = "";
        while (i < len) {
            /* c1 */
            do {
                c1 = base64DecodeChars[str.charCodeAt(i++) & 0xff];
            } while (i < len && c1 == -1);
            if (c1 == -1)
                break;

            /* c2 */
            do {
                c2 = base64DecodeChars[str.charCodeAt(i++) & 0xff];
            } while (i < len && c2 == -1);
            if (c2 == -1)
                break;

            out += String.fromCharCode((c1 << 2) | ((c2 & 0x30) >> 4));

            /* c3 */
            do {
                c3 = str.charCodeAt(i++) & 0xff;
                if (c3 == 61)
                    return out;
                c3 = base64DecodeChars[c3];
            } while (i < len && c3 == -1);
            if (c3 == -1)
                break;

            out += String.fromCharCode(((c2 & 0XF) << 4) | ((c3 & 0x3C) >> 2));

            /* c4 */
            do {
                c4 = str.charCodeAt(i++) & 0xff;
                if (c4 == 61)
                    return out;
                c4 = base64DecodeChars[c4];
            } while (i < len && c4 == -1);
            if (c4 == -1)
                break;
            out += String.fromCharCode(((c3 & 0x03) << 6) | c4);
        }
        return out;
    }

    function goHome() {
        window.open("http://www.peng8.net/");
    }

    function getGithub() {
        $.getJSON("https://api.github.com/repos/peng8/GeoMap/contents/json/bei_jing.geo.json", function (data) {
            console.log(base64decode(data.content));
        });

    }

</script>
</body>
</html>
